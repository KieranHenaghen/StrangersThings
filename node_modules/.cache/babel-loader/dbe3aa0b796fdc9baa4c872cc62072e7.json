{"ast":null,"code":"var _jsxFileName = \"/home/kch/USD_Class_Course_Work/StrangersThings/src/components/SinglePost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SinglePost = props => {\n  _s();\n\n  const {\n    post\n  } = props;\n  const [edit, setEdit] = useState(false);\n  const [newTitle, setNewTitle] = useState('');\n  const [newDescription, setNewDescription] = useState('');\n  const [newPrice, setNewPrice] = useState('');\n  const [newLocation, setNewLocation] = useState('');\n  const [newWillDeliver, setNewWillDeliver] = useState(false);\n\n  const deletePost = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/posts/${post._id}`, {\n        method: \"DELETE\",\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem(\"account-token\")}`\n        }\n      });\n      const data = await response.json();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const editPost = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/posts/${post._id}`, {\n        method: \"PATCH\",\n        headers: {\n          'Content-Type': 'application.json',\n          'Authorization': `Bearer ${localStorage.getItem(\"account-token\")}`\n        },\n        body: JSON.stringify({\n          post: {\n            title: newTitle,\n            description: newDescription,\n            price: newPrice,\n            location: newLocation,\n            willDeliver: newWillDeliver\n          }\n        })\n      });\n      const data = await response.json();\n      setNewTitle('');\n      setNewDescription('');\n      setNewPrice('');\n      setNewLocation('');\n      setNewWillDeliver(false);\n      fetchAllPosts();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return !edit ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"single-post\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: post.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: post.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: post.price\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: post.location\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: post.willDeliver\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), post.isAuthor ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deletePost,\n        children: \"Delete Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setEdit(true),\n        children: \"Edit Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 33\n    }, this) : localStorage.getItem(\"account-token\") ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        /*#__PURE__*/\n        _jsxDEV(SendMessage, {\n          post: post\n        }, post._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this);\n      },\n      children: \"Send Message\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 17\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"edit-post\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newTitle,\n        placeholder: \"New title\",\n        onChange: event => setNewTitle(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        type: \"text\",\n        value: newDescription,\n        placeholder: \"New description\",\n        onChange: event => setNewDescription(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newPrice,\n        placeholder: \"New price\",\n        onChange: event => setNewPrice(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newLocation,\n        placeholder: \"New location\",\n        onChange: event => setNewLocation(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Will Deliver?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        value: newWillDeliver,\n        onChange: () => willDeliver == false ? setNewWillDeliver(true) : setNewWillDeliver(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: editPost,\n        children: \"Save Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 11\n  }, this);\n};\n\n_s(SinglePost, \"OEaZKFhnhVXERO3Rt3meH+nPyuY=\");\n\n_c = SinglePost;\nexport default SinglePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"SinglePost\");","map":{"version":3,"sources":["/home/kch/USD_Class_Course_Work/StrangersThings/src/components/SinglePost.js"],"names":["React","useState","SinglePost","props","post","edit","setEdit","newTitle","setNewTitle","newDescription","setNewDescription","newPrice","setNewPrice","newLocation","setNewLocation","newWillDeliver","setNewWillDeliver","deletePost","response","fetch","BASE_URL","_id","method","headers","localStorage","getItem","data","json","err","console","log","editPost","body","JSON","stringify","title","description","price","location","willDeliver","fetchAllPosts","isAuthor","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\n\n\n\nconst SinglePost = (props) => {\n    const { post } = props;\n    const [edit, setEdit] = useState(false);\n    const [newTitle, setNewTitle] = useState('');\n    const [newDescription, setNewDescription] = useState('');\n    const [newPrice, setNewPrice] = useState('');\n    const [newLocation, setNewLocation] = useState('');\n    const [newWillDeliver, setNewWillDeliver] = useState(false);\n\n    const deletePost = async () => {\n        try {\n            const response = await fetch(`${BASE_URL}/posts/${post._id}`, {\n                method: \"DELETE\",\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${localStorage.getItem(\"account-token\")}`\n                }\n\n            })\n            const data = await response.json();\n        }\n        catch (err) {\n            console.log(err);\n        }\n    }\n    const editPost = async () => {\n        try {const response = await fetch(`${BASE_URL}/posts/${post._id}`, {\n            method: \"PATCH\",\n            headers: {\n                'Content-Type': 'application.json',\n                'Authorization': `Bearer ${localStorage.getItem(\"account-token\")}`\n            },\n            body: JSON.stringify({\n                post: {\n                    title: newTitle,\n                    description: newDescription,\n                    price: newPrice,\n                    location: newLocation,\n                    willDeliver: newWillDeliver\n                }\n            })\n        });\n            const data = await response.json();\n\n            setNewTitle('');\n            setNewDescription('');\n            setNewPrice('');\n            setNewLocation('');\n            setNewWillDeliver(false);\n            fetchAllPosts();\n        }\n        catch (err) {\n            console.log(err);\n        }\n    }\n    return (\n        !edit ? <div className=\"single-post\">\n            <div>\n                {post.title}\n            </div>\n            <div>\n                {post.description}\n            </div>\n            <div>\n                {post.price}\n            </div>\n            <div>\n                {post.location}\n            </div>\n            <div>\n                {post.willDeliver}\n            </div>\n            {\n                post.isAuthor ? <div>\n                    <button onClick={deletePost}>Delete Post</button>\n                    <button onClick={() => setEdit(true)}>Edit Post</button>\n                    </div> \n                : \n                localStorage.getItem(\"account-token\") ? \n                <button onClick={() => {\n                    <SendMessage key={post._id} post={post} />\n                }}>Send Message</button>\n                : null\n            }\n        </div>\n        : <div>\n            <form id=\"edit-post\">\n                <input type=\"text\" value={newTitle} placeholder=\"New title\" onChange={(event) => setNewTitle(event.target.value)}>\n\n                </input>\n                <textarea type=\"text\" value={newDescription} placeholder=\"New description\" onChange={(event) => setNewDescription(event.target.value)}>\n\n                </textarea>\n                <input type=\"text\" value={newPrice} placeholder=\"New price\" onChange={(event) => setNewPrice(event.target.value)}>\n\n                </input>\n                <input type=\"text\" value={newLocation} placeholder=\"New location\" onChange={(event) => setNewLocation(event.target.value)}>\n\n                </input>\n                <label>Will Deliver?</label>\n                <input type=\"checkbox\" value={newWillDeliver} onChange={() => willDeliver == false ? setNewWillDeliver(true) : setNewWillDeliver(false)}>\n\n                </input>\n                <button onClick={editPost}>\n                    Save Changes\n                </button>\n            </form>\n        </div>\n    )\n}\n\nexport default SinglePost;"]},"metadata":{},"sourceType":"module"}