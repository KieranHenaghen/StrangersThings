{"ast":null,"code":"var _jsxFileName = \"/home/kch/USD_Class_Course_Work/StrangersThings/src/components/SinglePost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { SendMessage } from './index.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SinglePost = props => {\n  _s();\n\n  const {\n    post\n  } = props;\n  const [edit, setEdit] = useState(false);\n  const [newTitle, setNewTitle] = useState('');\n  const [newDescription, setNewDescription] = useState('');\n  const [newPrice, setNewPrice] = useState('');\n  const [newLocation, setNewLocation] = useState('');\n  const [newWillDeliver, setNewWillDeliver] = useState(false);\n  const [send, setSend] = useState(false);\n\n  const deletePost = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/posts/${post._id}`, {\n        method: \"DELETE\",\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem(\"account-token\")}`\n        }\n      });\n      const data = await response.json();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const editPost = async () => {\n    try {\n      const response = await fetch(`${BASE_URL}/posts/${post._id}`, {\n        method: \"PATCH\",\n        headers: {\n          'Content-Type': 'application.json',\n          'Authorization': `Bearer ${localStorage.getItem(\"account-token\")}`\n        },\n        body: JSON.stringify({\n          post: {\n            title: newTitle,\n            description: newDescription,\n            price: newPrice,\n            location: newLocation,\n            willDeliver: newWillDeliver\n          }\n        })\n      });\n      const data = await response.json();\n      setNewTitle('');\n      setNewDescription('');\n      setNewPrice('');\n      setNewLocation('');\n      setNewWillDeliver(false);\n      fetchAllPosts();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return !edit ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"single-post\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: post.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Description: \", post.description]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Price: \", post.price]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Location: \", post.location]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Will Deliver?: \", post.willDeliver ? \"Yes\" : \"No\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), post.isAuthor ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deletePost,\n        children: \"Delete Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setEdit(true),\n        children: \"Edit Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 33\n    }, this) : localStorage.getItem(\"account-token\") ? send ? /*#__PURE__*/_jsxDEV(SendMessage, {\n      post: post\n    }, post._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setSend(true),\n      children: \"Send Message\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 19\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 17\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"edit-post\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newTitle,\n        placeholder: \"New title\",\n        onChange: event => setNewTitle(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        type: \"text\",\n        value: newDescription,\n        placeholder: \"New description\",\n        onChange: event => setNewDescription(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newPrice,\n        placeholder: \"New price\",\n        onChange: event => setNewPrice(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newLocation,\n        placeholder: \"New location\",\n        onChange: event => setNewLocation(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Will Deliver?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        value: newWillDeliver,\n        onChange: () => willDeliver == false ? setNewWillDeliver(true) : setNewWillDeliver(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: editPost,\n        children: \"Save Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 11\n  }, this);\n};\n\n_s(SinglePost, \"PzZC7QX/NncOJ0Q7Fs7ysupNyak=\");\n\n_c = SinglePost;\nexport default SinglePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"SinglePost\");","map":{"version":3,"sources":["/home/kch/USD_Class_Course_Work/StrangersThings/src/components/SinglePost.js"],"names":["React","useState","SendMessage","SinglePost","props","post","edit","setEdit","newTitle","setNewTitle","newDescription","setNewDescription","newPrice","setNewPrice","newLocation","setNewLocation","newWillDeliver","setNewWillDeliver","send","setSend","deletePost","response","fetch","BASE_URL","_id","method","headers","localStorage","getItem","data","json","err","console","log","editPost","body","JSON","stringify","title","description","price","location","willDeliver","fetchAllPosts","isAuthor","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { SendMessage } from './index.js';\n\n\n\nconst SinglePost = (props) => {\n    const { post } = props;\n    const [edit, setEdit] = useState(false);\n    const [newTitle, setNewTitle] = useState('');\n    const [newDescription, setNewDescription] = useState('');\n    const [newPrice, setNewPrice] = useState('');\n    const [newLocation, setNewLocation] = useState('');\n    const [newWillDeliver, setNewWillDeliver] = useState(false);\n    const [send, setSend] = useState(false);\n\n    const deletePost = async () => {\n        try {\n            const response = await fetch(`${BASE_URL}/posts/${post._id}`, {\n                method: \"DELETE\",\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${localStorage.getItem(\"account-token\")}`\n                }\n\n            })\n            const data = await response.json();\n        }\n        catch (err) {\n            console.log(err);\n        }\n    }\n    const editPost = async () => {\n        try {const response = await fetch(`${BASE_URL}/posts/${post._id}`, {\n            method: \"PATCH\",\n            headers: {\n                'Content-Type': 'application.json',\n                'Authorization': `Bearer ${localStorage.getItem(\"account-token\")}`\n            },\n            body: JSON.stringify({\n                post: {\n                    title: newTitle,\n                    description: newDescription,\n                    price: newPrice,\n                    location: newLocation,\n                    willDeliver: newWillDeliver\n                }\n            })\n        });\n            const data = await response.json();\n\n            setNewTitle('');\n            setNewDescription('');\n            setNewPrice('');\n            setNewLocation('');\n            setNewWillDeliver(false);\n            fetchAllPosts();\n        }\n        catch (err) {\n            console.log(err);\n        }\n    }\n    return (\n        !edit ? <div className=\"single-post\">\n            <div>\n                {post.title}\n            </div>\n            <div>\n                Description: {post.description}\n            </div>\n            <div>\n                Price: {post.price}\n            </div>\n            <div>\n                Location: {post.location}\n            </div>\n            <div>\n                Will Deliver?: {\n                post.willDeliver ?\n                \"Yes\" : \"No\"\n                }\n            </div>\n            {\n                post.isAuthor ? <div>\n                    <button onClick={deletePost}>Delete Post</button>\n                    <button onClick={() => setEdit(true)}>Edit Post</button>\n                    </div> \n                : \n                localStorage.getItem(\"account-token\") ? \n                send ? \n                <SendMessage key={post._id} post={post} />\n                : <button onClick={() => setSend(true)}>Send Message</button>\n                : null\n            }\n        </div>\n        : <div>\n            <form id=\"edit-post\">\n                <input type=\"text\" value={newTitle} placeholder=\"New title\" onChange={(event) => setNewTitle(event.target.value)}>\n\n                </input>\n                <textarea type=\"text\" value={newDescription} placeholder=\"New description\" onChange={(event) => setNewDescription(event.target.value)}>\n\n                </textarea>\n                <input type=\"text\" value={newPrice} placeholder=\"New price\" onChange={(event) => setNewPrice(event.target.value)}>\n\n                </input>\n                <input type=\"text\" value={newLocation} placeholder=\"New location\" onChange={(event) => setNewLocation(event.target.value)}>\n\n                </input>\n                <label>Will Deliver?</label>\n                <input type=\"checkbox\" value={newWillDeliver} onChange={() => willDeliver == false ? setNewWillDeliver(true) : setNewWillDeliver(false)}>\n\n                </input>\n                <button onClick={editPost}>\n                    Save Changes\n                </button>\n            </form>\n        </div>\n    )\n}\n\nexport default SinglePost;"]},"metadata":{},"sourceType":"module"}